<!--
COLOR PALETTE
#000000 - Black
#062807 - Body, Navbar Container
#16424A - Font Color
#E0F7F1 - Secondary Color
#F0F0F0 - White Container, Font Color
-->

<!doctype html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Saveior - Add Record</title>

      <!-- Styles -->
      <link rel="stylesheet" href="styles.css">
      <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
   </head>
   <body style="background-color:#062807;">
      <div class="rounded-container">
         <nav class="navbar navbar-expand-lg container-fluid">
            <div class="navbar-container">
               <a class="nav-logo text-decoration-none fs-4" href="#">
                  <img src="./boink.png" alt="Logo"> Saveior
               </a>
            </div>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
               aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
               <div class="mx-auto navbar-container position-absolute start-50 translate-middle-x">
                  <ul class="nav flex-lg-row flex-column text-center gap-2">
                     <li class="nav-item"><a class="nav-link text-light" href="#">Dashboard</a></li>
                     <li class="nav-item"><a class="nav-link active" href="#">Records</a></li>
                     <li class="nav-item"><a class="nav-link text-light" href="#">Budgets</a></li>
                     <li class="nav-item"><a class="nav-link text-light" href="#">Accounts</a></li>
                     <li class="nav-item"><a class="nav-link text-light" href="#">Categories</a></li>
                     <li class="nav-item"><a class="nav-link text-light" href="#">Savings</a></li>

                     <a href="#" class="nav-link d-lg-none">Settings</a>
                     <a href="#" class="nav-link d-lg-none">Accounts</a>
                  </ul>
               </div>

               <div class="ms-lg-auto mt-2 mt-lg-0">
                  <div class="d-flex flex-column flex-lg-row justify-content-center justify-content-lg-end text-center">
                     <button class="icon-btn d-none d-lg-flex"><i class="bi bi-gear"></i></button>
                     <button class="icon-btn d-none d-lg-flex"><i class="bi bi-person"></i></button>
                  </div>
               </div>
            </div>
         </nav>

         <div class="button-container position-absolute start-50 translate-middle-x mt-3">
            <input type="radio" id="diamondBtn" name="transactionType" value="income" />
            <label for="diamondBtn">Income</label>

            <input type="radio" id="hourglassBtn" name="transactionType" value="expense" />
            <label for="hourglassBtn">Expense</label>

            <input type="radio" id="ribbonBtn" name="transactionType" value="transfer" />
            <label for="ribbonBtn">Transfer</label>
         </div>



      <div class="tracker-container">
         <!-- Left panel -->
         <div class="left-panel">
            <div class="tabs">
               <button class="btn btn-outline-secondary">Account</button>
               <button class="btn btn-outline-secondary">Category</button>
            </div>

            <textarea id="desc-input" class="notes" placeholder="Add notes"></textarea>

            <!-- Calculator -->
            <input type="text" id="display" class="form-control calc-display" disabled>

            <div class="row g-2">
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('+')">+</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('7')">7</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('8')">8</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('9')">9</button></div>

               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('-')">−</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('4')">4</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('5')">5</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('6')">6</button></div>

               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('×')">*</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('1')">1</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('2')">2</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('3')">3</button></div>

               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('÷')">/</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('0')">0</button></div>
               <div class="col-3"><button class="btn btn-light calc-btn w-100" onclick="press('.')">.</button></div>
               <div class="col-3"><button class="btn btn-danger calc-btn w-100" onclick="clearDisplay()">C</button></div>
            </div>

            <div class="save-cancel">
               <button class="btn btn-danger" onclick="cancelEntry()">Back</button>
               <button class="btn btn-success" onclick="saveEntry()">Save</button>
            </div>
         </div>

         <!-- Right panel -->
         <div class="right-panel ms-5">
            <div class="summary bg-light p-3 rounded mb-3 d-flex justify-content-around">
               <div class="text-dark">EXPENSE: <span id="total-expenses" class="text-danger">₱0</span></div>
               <div class="text-dark">INCOME: <span id="total-income" class="text-success">₱0</span></div>
            </div>

            <div class="entries" id="expense-list"></div>
            <div class="total-bar text-center">TOTAL: <span id="balance">₱0</span></div>
         </div>
         </div>


      </div>

      <script>
         let totalIncome = 0;
         let totalExpenses = 0;
         let currentAmount = null;

         function saveEntry() {
            let desc = document.getElementById("desc-input").value.trim() || "Untitled";
            let type = document.querySelector('input[name="transactionType"]:checked')?.value || null;


            if (currentAmount === null || isNaN(currentAmount) || currentAmount <= 0) {
               alert("Enter a valid amount!");
               return;
            }

            let entry = document.createElement("div");
            entry.className = "entry-item " + type;
            entry.innerHTML = `<span>${desc}</span><span>₱${currentAmount.toFixed(2)}</span>`;

            document.getElementById("expense-list").appendChild(entry);

            if (type === "income") {
               totalIncome += currentAmount;
            } else {
               totalExpenses += currentAmount;
            }
            updateSummary();
            cancelEntry();
         }

         function cancelEntry() {
            document.getElementById("desc-input").value = "";
            document.getElementById("type-input").value = "income";
            document.getElementById("display").value = "";
            currentAmount = null;
         }

         function updateSummary() {
            document.getElementById("total-income").textContent = "₱" + totalIncome.toFixed(2);
            document.getElementById("total-expenses").textContent = "₱" + totalExpenses.toFixed(2);
            document.getElementById("balance").textContent = "₱" + (totalIncome - totalExpenses).toFixed(2);
         }

         function press(value) {
            document.getElementById("display").value += value;
            liveCalculate();
         }

         function clearDisplay() {
            document.getElementById("display").value = "";
            currentAmount = null;
         }

         function liveCalculate() {
            try {
               let expr = document.getElementById("display").value.replace(/×/g, '*').replace(/÷/g, '/');
               if (!expr.trim()) return;
               let result = eval(expr);
               if (!isNaN(result)) {
               currentAmount = parseFloat(result);
               }
            } catch {
               currentAmount = null;
            }
         }
         </script>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
   </body>
</html>
